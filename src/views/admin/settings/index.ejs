<%- include('../layouts/main', { body: `
<div class="page-header">
  <h1><i class="bi bi-gear me-2"></i>Configurações</h1>
</div>

<form action="/admin/settings" method="POST">
  <div class="row">
    <div class="col-lg-8">
      <!-- General Settings -->
      <div class="card mb-4">
        <div class="card-header">
          <i class="bi bi-sliders me-2"></i>Configurações Gerais
        </div>
        <div class="card-body">
          ${groupedSettings.general ? groupedSettings.general.map(setting => 
            '<div class="mb-3">' +
              '<label class="form-label">' + (setting.label || setting.key) + '</label>' +
              (setting.type === 'textarea' 
                ? '<textarea name="' + setting.key + '" class="form-control" rows="2">' + (setting.value || '') + '</textarea>'
                : '<input type="' + (setting.type === 'number' ? 'number' : 'text') + '" name="' + setting.key + '" class="form-control" value="' + (setting.value || '') + '">'
              ) +
              (setting.description ? '<small class="text-muted">' + setting.description + '</small>' : '') +
            '</div>'
          ).join('') : '<p class="text-muted">Nenhuma configuração encontrada.</p>'}
        </div>
      </div>
      
      <!-- Contact Settings -->
      <div class="card mb-4">
        <div class="card-header">
          <i class="bi bi-envelope me-2"></i>Contato
        </div>
        <div class="card-body">
          ${groupedSettings.contact ? groupedSettings.contact.map(setting => 
            '<div class="mb-3">' +
              '<label class="form-label">' + (setting.label || setting.key) + '</label>' +
              (setting.type === 'textarea' 
                ? '<textarea name="' + setting.key + '" class="form-control" rows="2">' + (setting.value || '') + '</textarea>'
                : '<input type="text" name="' + setting.key + '" class="form-control" value="' + (setting.value || '') + '">'
              ) +
            '</div>'
          ).join('') : ''}
        </div>
      </div>
      
      <!-- Social Settings -->
      <div class="card mb-4">
        <div class="card-header">
          <i class="bi bi-share me-2"></i>Redes Sociais
        </div>
        <div class="card-body">
          ${groupedSettings.social ? groupedSettings.social.map(setting => 
            '<div class="mb-3">' +
              '<label class="form-label">' + (setting.label || setting.key) + '</label>' +
              '<input type="url" name="' + setting.key + '" class="form-control" value="' + (setting.value || '') + '" placeholder="https://">' +
            '</div>'
          ).join('') : ''}
        </div>
      </div>
      
      <!-- Posts Settings -->
      <div class="card mb-4">
        <div class="card-header">
          <i class="bi bi-file-text me-2"></i>Posts
        </div>
        <div class="card-body">
          ${groupedSettings.posts ? groupedSettings.posts.map(setting => 
            '<div class="mb-3">' +
              '<label class="form-label">' + (setting.label || setting.key) + '</label>' +
              '<input type="number" name="' + setting.key + '" class="form-control" value="' + (setting.value || '') + '" min="1">' +
              (setting.description ? '<small class="text-muted">' + setting.description + '</small>' : '') +
            '</div>'
          ).join('') : ''}
        </div>
      </div>
      
      <!-- Footer Settings -->
      <div class="card mb-4">
        <div class="card-header">
          <i class="bi bi-layout-text-window-reverse me-2"></i>Rodapé
        </div>
        <div class="card-body">
          ${groupedSettings.footer ? groupedSettings.footer.map(setting => 
            '<div class="mb-3">' +
              '<label class="form-label">' + (setting.label || setting.key) + '</label>' +
              '<textarea name="' + setting.key + '" class="form-control" rows="2">' + (setting.value || '') + '</textarea>' +
            '</div>'
          ).join('') : ''}
        </div>
      </div>
      
      <div class="d-flex gap-2 mb-4">
        <button type="submit" class="btn btn-primary btn-lg">
          <i class="bi bi-check-lg me-1"></i>Salvar Configurações
        </button>
      </div>
    </div>
    
    <div class="col-lg-4">
      <div class="card">
        <div class="card-header">
          <i class="bi bi-info-circle me-2"></i>Informações
        </div>
        <div class="card-body">
          <p class="mb-2"><strong>Versão:</strong> 1.0.0</p>
          <p class="mb-2"><strong>Node.js:</strong> ${process.version}</p>
          <p class="mb-2"><strong>Ambiente:</strong> ${process.env.NODE_ENV || 'development'}</p>
          <p class="mb-2"><strong>Desenvolvido por:</strong> Erick Vinicius</p>
          <hr>
          <p class="small text-muted mb-0">
            As configurações são aplicadas imediatamente após salvar. 
            Algumas alterações podem exigir que você atualize a página para ver os efeitos.
          </p>
        </div>
      </div>
      
      <div class="card mt-3">
        <div class="card-header">
          <i class="bi bi-link-45deg me-2"></i>Links Úteis
        </div>
        <div class="card-body">
          <a href="/" target="_blank" class="btn btn-outline-primary btn-sm w-100 mb-2">
            <i class="bi bi-eye me-1"></i>Ver Site
          </a>
          <a href="/sitemap.xml" target="_blank" class="btn btn-outline-secondary btn-sm w-100 mb-2">
            <i class="bi bi-diagram-3 me-1"></i>Sitemap
          </a>
          <a href="/robots.txt" target="_blank" class="btn btn-outline-secondary btn-sm w-100">
            <i class="bi bi-robot me-1"></i>Robots.txt
          </a>
        </div>
      </div>
    </div>
  </div>
</form>
`}) %>
